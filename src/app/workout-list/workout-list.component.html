<div class="container mx-auto p-6">
  <!-- Search and Filter Section -->
  <div class="flex justify-between items-center mb-6">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (keyup)="searchUsers()"
      placeholder="Search by name"
      class="w-1/3 p-3 bg-white bg-opacity-80 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-500 text-gray-800 transition-all duration-200 hover:bg-opacity-90" />

    <select
      [(ngModel)]="filterType"
      (change)="filterWorkouts()"
      class="w-1/4 p-3 bg-white bg-opacity-80 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 transition-all duration-200 hover:bg-opacity-90">
      <option *ngFor="let type of workoutTypes" [value]="type">{{ type }}</option>
    </select>
  </div>

  <!-- Table Section -->
  <div class="bg-white bg-opacity-80 backdrop-blur-lg rounded-xl shadow-lg overflow-hidden">
    <table class="w-full border-collapse">
      <thead class="bg-gray-50">
        <tr class="text-left">
          <th class="px-6 py-4 font-medium text-gray-700">Name</th>
          <th class="px-6 py-4 font-medium text-gray-700">Workouts</th>
          <th class="px-6 py-4 font-medium text-gray-700">Count</th>
          <th class="px-6 py-4 font-medium text-gray-700">Minutes</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let user of paginatedUsers"
          (click)="selectUser(user)"
          class="hover:bg-gray-50 cursor-pointer transition-all duration-200">
          <td class="px-6 py-4 text-gray-700">{{ user.name }}</td>
          <td class="px-6 py-4 text-gray-700">
            <span *ngFor="let workout of user.workouts; let last = last">
              {{ workout.type }} ({{ workout.minutes }} min)
              <span *ngIf="!last">, </span>
            </span>
          </td>
          <td class="px-6 py-4 text-center text-gray-700">{{ user.workouts.length }}</td>
          <td class="px-6 py-4 text-center text-gray-700">{{ calculateTotalMinutes(user) }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination Section -->
  <div *ngIf="filteredUsers.length > itemsPerPage" class="mt-6 flex justify-center">
    <button
      [disabled]="currentPage === 1"
      (click)="changePage(currentPage - 1)"
      class="bg-gray-200 text-gray-800 py-2 px-4 rounded-lg mr-2 hover:bg-gray-300 transition-all duration-200">
      Previous
    </button>
    <span *ngFor="let page of getPages()">
      <button
        [class.active]="page === currentPage"
        (click)="changePage(page)"
        class="bg-gray-200 text-gray-800 py-2 px-4 rounded-lg mx-1 hover:bg-gray-300 transition-all duration-200">
        {{ page }}
      </button>
    </span>
    <button
      [disabled]="isNextPageDisabled()"
      (click)="changePage(currentPage + 1)"
      class="bg-gray-200 text-gray-800 py-2 px-4 rounded-lg ml-2 hover:bg-gray-300 transition-all duration-200">
      Next
    </button>
  </div>

  <!-- Workout Comparison Section -->
  <app-workout-comparison [user]="selectedUser" *ngIf="selectedUser"></app-workout-comparison>
</div>
