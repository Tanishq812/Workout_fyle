<div class="container mx-auto p-4">
  <div class="mb-4 flex space-x-4">
    <input type="text" [(ngModel)]="searchTerm" (keyup)="searchUsers()" placeholder="Search by name" class="border border-gray-300 rounded px-2 py-1">

    <select [(ngModel)]="filterType" (change)="filterWorkouts()" class="border border-gray-300 rounded px-2 py-1">
      <option *ngFor="let type of workoutTypes" [value]="type">{{ type }}</option>
    </select>
  </div>

  <table class="table-auto w-full border-collapse border border-gray-300 shadow-md">  <thead>
        <tr class="bg-gray-100 text-left">  <th class="border border-gray-300 px-4 py-2 font-medium text-gray-700">Name</th>
          <th class="border border-gray-300 px-4 py-2 font-medium text-gray-700">Workouts</th>
          <th class="border border-gray-300 px-4 py-2 font-medium text-gray-700">Number of Workouts</th>
          <th class="border border-gray-300 px-4 py-2 font-medium text-gray-700">Total Workout Minutes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of paginatedUsers" (click)="selectUser(user)" style="cursor: pointer;" class="hover:bg-gray-50 transition duration-300 ease-in-out">  <td class="border border-gray-300 px-4 py-2 text-gray-700">{{ user.name }}</td>
          <td class="border border-gray-300 px-4 py-2 text-gray-700">
            <span *ngFor="let workout of user.workouts; let last = last">
              {{ workout.type }} ({{ workout.minutes }} mins)
              <span *ngIf="!last">, </span>
            </span>
          </td>
          <td class="border border-gray-300 px-4 py-2 text-center text-gray-700">{{ user.workouts.length }}</td>
          <td class="border border-gray-300 px-4 py-2 text-center text-gray-700">{{ calculateTotalMinutes(user) }}</td>
        </tr>
      </tbody>
    </table>

  <div *ngIf="filteredUsers.length > itemsPerPage" class="mt-4 flex justify-center">
    <button [disabled]="currentPage === 1" (click)="changePage(currentPage - 1)" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2">Previous</button>
    <span *ngFor="let page of getPages()">
      <button [class.active]="page === currentPage" (click)="changePage(page)" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mx-1">{{ page }}</button>
    </span>
    <button [disabled]="isNextPageDisabled()" (click)="changePage(currentPage + 1)" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded ml-2">Next</button>
  </div>

  <app-workout-comparison [user]="selectedUser" *ngIf="selectedUser"></app-workout-comparison>
</div>
